(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,a){e.exports=a(45)},34:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),s=a.n(o),c=(a(34),a(9)),l=a(6),i=a(10),u=a(11),d=a(13),m=a(12),h=a(14),b=a(48),p=a(46),v=a(7),f=a.n(v),j=a(28),y=a(2),O=a(4),w={sarah_edo:{id:"sarah_edo",name:"Sarah Drasner",avatarURL:"https://tylermcginnis.com/would-you-rather/sarah.jpg",answers:{"8xf0y6ziyjabvozdd253nd":"a","6ni6ok3ym7mf1p33lnez":"a",am8ehyc8byjqgar0jgpub9:"b",loxhs1bqm25b708cmbf3g:"d"},polls:["8xf0y6ziyjabvozdd253nd","am8ehyc8byjqgar0jgpub9"]},tylermcginnis:{id:"tylermcginnis",name:"Tyler McGinnis",avatarURL:"https://tylermcginnis.com/would-you-rather/tyler.jpg",answers:{vthrdm985a262al8qx3do:"a",xj352vofupe1dqz9emx13r:"a"},polls:["loxhs1bqm25b708cmbf3g","vthrdm985a262al8qx3do"]},dan_abramov:{id:"dan_abramov",name:"Dan Abramov",avatarURL:"https://tylermcginnis.com/would-you-rather/dan.jpg",answers:{xj352vofupe1dqz9emx13r:"a",vthrdm985a262al8qx3do:"d","6ni6ok3ym7mf1p33lnez":"d"},polls:["6ni6ok3ym7mf1p33lnez","xj352vofupe1dqz9emx13r"]}},E={"8xf0y6ziyjabvozdd253nd":{id:"8xf0y6ziyjabvozdd253nd",question:"Who is the best basketball player to ever live?",author:"sarah_edo",timestamp:1467166872634,a:{text:"Michael Jordan",votes:["sarah_edo"]},b:{text:"Jimmer Fredette",votes:[]},c:{text:"Lebron James",votes:[]},d:{text:"Kobe Bryant",votes:[]}},"6ni6ok3ym7mf1p33lnez":{id:"6ni6ok3ym7mf1p33lnez",question:"How will we build UIs in 2019?",author:"dan_abramov",timestamp:1468479767190,a:{text:"React.js",votes:["sarah_edo"]},b:{text:"ReasonML",votes:[]},c:{text:"Vue.js",votes:[]},d:{text:"Angular.js",votes:["dan_abramov"]}},am8ehyc8byjqgar0jgpub9:{id:"am8ehyc8byjqgar0jgpub9",question:"What is your favorite book?",author:"sarah_edo",timestamp:1488579767190,a:{text:"Harry Potter",votes:[]},b:{text:"Lord of the Rings",votes:["sarah_edo"]},c:{text:"To Kill a Mockingbird",votes:[]},d:{text:"Other",votes:[]}},loxhs1bqm25b708cmbf3g:{id:"loxhs1bqm25b708cmbf3g",question:"Which artist do you prefer?",author:"tylermcginnis",timestamp:1482579767190,a:{text:"Chance the Rapper",votes:[]},b:{text:"Anderson .Paak",votes:[]},c:{text:"Childish Gambino",votes:[]},d:{text:"Kanye West",votes:["sarah_edo"]}},vthrdm985a262al8qx3do:{id:"vthrdm985a262al8qx3do",question:"Where is the best place to live?",author:"tylermcginnis",timestamp:1489579767190,a:{text:"Eden, Utah",votes:["tylermcginnis"]},b:{text:"Kauai, HI",votes:[]},c:{text:"San Francisco, CA",votes:[]},d:{text:"Other",votes:["dan_abramov"]}},xj352vofupe1dqz9emx13r:{id:"xj352vofupe1dqz9emx13r",question:"Who will win the election in 2020?",author:"dan_abramov",timestamp:1493579767190,a:{text:"Kanye West",votes:["dan_abramov"]},b:{text:"Donald Trump",votes:[]},c:{text:"Oprah Winfrey",votes:["tylermcginnis"]},d:{text:"Dwayne Johnson",votes:[]}}};function g(e){return Object(y.a)({},e,{id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),timestamp:Date.now(),a:{text:e.a,votes:[]},b:{text:e.b,votes:[]},c:{text:e.c,votes:[]},d:{text:e.d,votes:[]}})}function x(e){return Object.keys(e).reduce(function(t,a){var n,r=e[a];return n=r,"[object Object]"===Object.prototype.toString.call(n)?(t["".concat(a,"Text")]=r.text,t["".concat(a,"Votes")]=r.votes,t):(t[a]=r,t)},{})}function q(){return Promise.all([new Promise(function(e,t){setTimeout(function(){return e(Object(y.a)({},w))},1e3)}),new Promise(function(e,t){setTimeout(function(){return e(Object(y.a)({},E))},1e3)})]).then(function(e){var t=Object(j.a)(e,2),a=t[0],n=t[1];return{users:function(e){return Object.keys(e).reduce(function(t,a){var n=e[a];return t[a]=Object(y.a)({},n,{answers:Object.keys(n.answers)}),t},{})}(a),polls:function(e){return Object.keys(e).reduce(function(t,a){return t[a]=x(e[a]),t},{})}(n)}})}function U(e){return function(e){return new Promise(function(t,a){var n=g(e);setTimeout(function(){E=Object(y.a)({},E,Object(O.a)({},n.id,n)),t(n)},1e3)})}(e).then(function(e){return x(e)})}function _(e){return function(e){var t=e.authedUser,a=e.id,n=e.answer;return new Promise(function(e,r){setTimeout(function(){var r=w[t],o=E[a];w=Object(y.a)({},w,Object(O.a)({},t,Object(y.a)({},r,{answers:Object(y.a)({},r.answers,Object(O.a)({},a,n))}))),E=Object(y.a)({},E,Object(O.a)({},a,Object(y.a)({},o,Object(O.a)({},n,Object(y.a)({},o[n],{votes:o[n].votes.concat([t])}))))),e()},500)})}(e)}var k="RECEIVE_USERS",C=function(e){return{type:k,users:e}},A="RECEIVE_POLLS",N="ADD_POLL",L=function(e){return{type:A,polls:e}},S=function(e){return function(t,a){var n=a().authedUser;return t(Object(v.showLoading)()),U(Object(y.a)({},e,{author:n})).then(function(e){return t({type:N,poll:e})}).then(function(){return t(Object(v.hideLoading)())})}},D="SET_AUTHED_USER",z=function(e){return{type:D,id:e}},R="dan_abramov";var T=a(43),V=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={showAnswered:!1},a.showUnanswered=function(){a.setState({showAnswered:!1})},a.showAnswered=function(){a.setState({showAnswered:!0})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.showAnswered,t=this.props,a=t.answered,n=t.unanswered,o=e?a:n;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"dashboard-toggle"},r.a.createElement("button",{style:{textDecoration:e?null:"underline"},onClick:this.showUnanswered},"Unanswered"),r.a.createElement("span",null," | "),r.a.createElement("button",{style:{textDecoration:e?"underline":null},onClick:this.showAnswered},"Answered")),r.a.createElement("ul",{className:"dashboard-list"},o.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(T.a,{to:"polls/".concat(e.id)},e.question))})))}}]),t}(n.Component),I=Object(l.connect)(function(e){var t=e.authedUser,a=e.polls,n=e.users[t].answers;return{answered:n.map(function(e){return a[e]}).sort(function(e,t){return t.timestamp-e.timestamp}),unanswered:Object.keys(a).filter(function(e){return!n.includes(e)}).map(function(e){return a[e]}).sort(function(e,t){return t.timestamp-e.timestamp})}})(V),P=Object(l.connect)(function(e){var t=e.users;return{users:Object.keys(t).map(function(e){var a=t[e],n=a.name,r=a.avatarURL,o=a.polls,s=a.answers;return{id:e,name:n,avatarURL:r,polls:o.length,answers:s.length}}).sort(function(e,t){return t.polls+t.answers>e.polls+e.answers})}})(function(e){var t=e.users;return r.a.createElement("ul",null,t.map(function(e){return r.a.createElement("li",{className:"user",key:e.id},r.a.createElement("img",{src:e.avatarURL,alt:"Avatar for ".concat(e.name)}),r.a.createElement("div",null,r.a.createElement("h1",null,e.name),r.a.createElement("p",null,e.polls," Polls"),r.a.createElement("p",null,e.answers," Answers")))}))}),W=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={question:"",a:"",b:"",c:"",d:""},a.handleInputChange=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(O.a)({},r,n))},a.isDisabled=function(){var e=a.state,t=e.question,n=e.a,r=e.b,o=e.c,s=e.d;return""===t||""===n||""===r||""===o||""===s},a.handleSubmit=function(e){e.preventDefault(),a.props.history.push("/"),a.props.dispatch(S(a.state))},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.question,a=e.a,n=e.b,o=e.c,s=e.d;return r.a.createElement("form",{className:"add-form",onSubmit:this.handleSubmit},r.a.createElement("h3",{style:{marginBottom:"1.5rem"}},"What is your question?"),r.a.createElement("input",{value:t,onChange:this.handleInputChange,name:"question",className:"input",type:"text"}),r.a.createElement("h3",null,"What are the options?"),r.a.createElement("label",{htmlFor:"a",className:"label"},"A."),r.a.createElement("input",{value:a,onChange:this.handleInputChange,name:"a",id:"a",className:"input",type:"text"}),r.a.createElement("label",{htmlFor:"b",className:"label"},"B."),r.a.createElement("input",{value:n,onChange:this.handleInputChange,name:"b",id:"b",className:"input",type:"text"}),r.a.createElement("label",{htmlFor:"c",className:"label"},"C."),r.a.createElement("input",{value:o,onChange:this.handleInputChange,name:"c",id:"c",className:"input",type:"text"}),r.a.createElement("label",{htmlFor:"d",className:"label"},"D."),r.a.createElement("input",{value:s,onChange:this.handleInputChange,name:"d",id:"d",className:"input",type:"text"}),r.a.createElement("button",{className:"btn",type:"submit",disabled:this.isDisabled()},"Submit"))}}]),t}(n.Component),F=Object(l.connect)()(W),M="ADD_ANSWER",B=function(e){return function(t){return t(Object(v.showLoading)()),_(e).then(function(){return t(function(e){var t=e.authedUser,a=e.id,n=e.answer;return{type:M,authedUser:t,id:a,answer:n}}(e))}).then(t(Object(v.hideLoading)()))}},J=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleAnswer=function(e){var t=a.props,n=t.poll,r=t.authedUser;a.answered=!0,a.props.dispatch(B({authedUser:r,answer:e,id:n.id}))},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.poll,n=t.vote,o=t.authorAvatar,s=["aVotes","bVotes","cVotes","dVotes"].reduce(function(e,t){return e+a[t].length},0);return null===a?r.a.createElement("p",null,"This poll does not exist."):r.a.createElement("div",{className:"poll-container"},r.a.createElement("h1",{className:"question"},a.question),r.a.createElement("div",{className:"poll-author"},"By ",r.a.createElement("img",{src:o,alt:"Author's avatar"})),r.a.createElement("ul",null,["aText","bText","cText","dText"].map(function(t){var o,c,l=a["".concat(t[0],"Votes")].length;return r.a.createElement("li",{onClick:function(){null!==n||e.answered||e.handleAnswer(t[0])},key:t,className:"option ".concat(n===t[0]?"chosen":"")},null===n?a[t]:r.a.createElement("div",{className:"result"},r.a.createElement("span",null,a[t]),r.a.createElement("span",null,(o=l,0===(c=s)?0:parseInt(o/c*100,10)),"% (",l,")")))})))}}]),t}(n.Component),H=Object(l.connect)(function(e,t){var a=e.authedUser,n=e.polls,r=e.users,o=n[t.match.params.id];if(!o)return{poll:null};var s=["aVotes","bVotes","cVotes","dVotes"].reduce(function(e,t){return null!==e?e:o[t].includes(a)?t[0]:e},null);return{poll:o,vote:s,authedUser:a,authorAvatar:r[o.author].avatarURL}})(J),K=a(47);function G(){return r.a.createElement("nav",{className:"nav"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(K.a,{to:"/",exact:!0,activeClassName:"active"},"Home")),r.a.createElement("li",null,r.a.createElement(K.a,{to:"/leaderboard",activeClassName:"active"},"Leaderboard")),r.a.createElement("li",null,r.a.createElement(K.a,{to:"/add",activeClassName:"active"},"Add Poll"))))}var X=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(function(e){return e(Object(v.showLoading)()),q().then(function(t){var a=t.users,n=t.polls;e(C(a)),e(L(n)),e(z(R)),e(Object(v.hideLoading)())})})}},{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null),r.a.createElement("div",{className:"container"},r.a.createElement(G,null),this.props.loading?null:r.a.createElement("div",null,r.a.createElement(p.a,{path:"/",exact:!0,component:I}),r.a.createElement(p.a,{path:"/leaderboard",component:P}),r.a.createElement(p.a,{path:"/polls/:id",component:H}),r.a.createElement(p.a,{path:"/add",component:F})))))}}]),t}(n.Component),Q=Object(l.connect)(function(e){return{loading:null===e.authedUser}})(X),Y=a(17);var Z=Object(c.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(y.a)({},e,t.users);case N:var a=t.poll,n=a.author,r=a.id;return Object(y.a)({},e,Object(O.a)({},n,Object(y.a)({},e[n],{polls:e[n].polls.concat([r])})));case M:var o=e[t.authedUser];return Object(y.a)({},e,Object(O.a)({},t.authedUser,Object(y.a)({},o,{answers:Object(Y.a)(o.answers).concat([t.id])})));default:return e}},polls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(y.a)({},e,t.polls);case N:return Object(y.a)({},e,Object(O.a)({},t.poll.id,t.poll));case M:var a=t.answer,n=t.id,r=t.authedUser,o=e[n],s="".concat(a,"Votes");return Object(y.a)({},e,Object(O.a)({},t.id,Object(y.a)({},o,Object(O.a)({},s,Object(Y.a)(o[s]).concat([r])))));default:return e}},authedUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return t.id;default:return e}},loadingBar:v.loadingBarReducer}),$=a(27),ee=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d)(Object(c.a)($.a)),te=Object(c.e)(Z,ee);s.a.render(r.a.createElement(l.Provider,{store:te},r.a.createElement(Q,null)),document.getElementById("root"))}},[[29,2,1]]]);
//# sourceMappingURL=main.0edd3da3.chunk.js.map